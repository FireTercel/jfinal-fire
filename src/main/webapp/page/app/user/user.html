<#include "/page/common/_layout.html"/>
<@layout activebar="user" html_title="用户管理">

<div class="page-header">
<h3>用户管理&nbsp;&nbsp;
<a href="/admin/add">创建用户</a>
</h3>
</div>
<form class="form-inline branch" role="form" action="/admin/branch" method="get">

  &nbsp;
	<div class="form-group pull-right">
    <button type="button" class="btn btn-success" data-toggle="modal" data-target="#saveModal">新用户</button>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#testModal">测试</button>
  	</div>
</form>
  &nbsp;

	<table class="table table-bordered table-hover">
		<thead>
			<tr>
				<th width="10%">姓名</th>
				<th width="10%">工号</th>
				<th width="15%">联系电话</th>
				<th width="15%">状态</th>
				<th width="10%">操作</th>
			</tr>
		</thead>
		<tbody>
			<#list userPage.getList() as x>
			<tr>
				<td style="text-align:left;">${x.full_name}</td>
				<td style="text-align:left;">${x.username}</td>
				<td style="text-align:left;">${x.phone!(0)}</td>
				<td >
					<#if x.deleted_at??>
					已删除
					<#else>
					正常
					</#if>
				</td>
				<@shiro.hasPermission name="P_USER_CONTROL">
				<td style="text-align:left;">
				&nbsp;&nbsp;<a class="update" username="${x.username}" userid="${x.id}" href="/admin/control" data-toggle="modal">修改</a>
					<#if x.deleted_at??>
						
					<#else>
						&nbsp;&nbsp;<a class="delete" userid="${x.id}" href="#confirmModal" data-toggle="modal" data-label="删除" data-content="确认删除？">删除</a>
					</#if>
					
				</td>
				</@shiro.hasPermission>
			</tr>
			</#list>
		</tbody>
	</table>
	<#include "/page/common/_paginate.html" />
	<@paginate currentPage=userPage.pageNumber totalPage=userPage.totalPage actionUrl="/admin/" />


<#include "/page/app/user/_model.html"/>

</@layout>